<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>사용자 관리 시스템</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .navbar {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }
        
        .navbar-brand {
            font-weight: 700;
            color: #667eea !important;
        }
        
        .navbar-nav .nav-link {
            color: #333 !important;
            font-weight: 500;
            margin: 0 0.5rem;
            padding: 0.5rem 1rem !important;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .navbar-nav .nav-link:hover {
            background: #667eea;
            color: white !important;
            transform: translateY(-2px);
        }
        
        .navbar-nav .nav-link.active {
            background: #667eea;
            color: white !important;
        }
        
        .main-container {
            padding: 2rem 0;
        }
        
        .page-header {
            text-align: center;
            color: white;
            margin-bottom: 3rem;
        }
        
        .page-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .page-header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .management-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            text-decoration: none !important;
            color: inherit !important;
            display: block;
            cursor: pointer !important;
            position: relative;
            z-index: 10;
            border: 2px solid transparent;
            /* 클릭 이벤트를 방해하는 모든 속성 제거 */
        }
        
        .management-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            text-decoration: none !important;
            color: inherit !important;
            border-color: #667eea;
        }
        
        .management-card:active {
            transform: translateY(-2px);
        }
        
        .management-card:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.25);
        }
        
        .management-card:visited {
            text-decoration: none !important;
            color: inherit !important;
        }
        
        /* 모든 하위 요소가 클릭을 방해하지 않도록 설정 */
        .management-card * {
            pointer-events: auto !important;
        }
        
        /* 링크 자체는 항상 클릭 가능하도록 */
        .management-card {
            pointer-events: auto !important;
        }
        
        .management-card .card-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #667eea;
        }
        
        .management-card .card-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #333;
        }
        
        .management-card .card-description {
            color: #666;
            line-height: 1.6;
        }
        
        .stats-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .stats-card .stats-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 0.5rem;
        }
        
        .stats-card .stats-label {
            color: #666;
            font-weight: 500;
        }
        
        .btn-back {
            background: #6c757d;
            border: none;
            border-radius: 10px;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-block;
            margin-bottom: 2rem;
        }
        
        .btn-back:hover {
            background: #5a6268;
            color: white;
            text-decoration: none;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- 네비게이션 바 -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="/home">
                <i class="fas fa-university"></i> SKCC Oversea
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/cashcard">
                            <i class="fas fa-credit-card"></i> Cash Card
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/deposit">
                            <i class="fas fa-piggy-bank"></i> Deposit
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/teller">
                            <i class="fas fa-user-tie"></i> Teller
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/user-management-web">
                            <i class="fas fa-users"></i> User
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/eplaton/manage">
                            <i class="fas fa-cogs"></i> EPlaton
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/logout">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container main-container" style="margin-top: 80px;">
        <div class="page-header">
            <h1><i class="fas fa-users"></i> 사용자 관리</h1>
            <p>사용자 등록, 권한 관리, 보안 관리, 활동 로그를 통합 관리합니다</p>
        </div>
        
        <div class="text-center">
            <a href="/home" class="btn-back">
                <i class="fas fa-arrow-left"></i> 홈으로 돌아가기
            </a>
            <a href="/user-management-web/test" class="btn btn-warning ms-3">
                <i class="fas fa-bug"></i> 클릭 이벤트 테스트
            </a>
            <a href="/user-management-web/debug" class="btn btn-danger ms-3">
                <i class="fas fa-exclamation-triangle"></i> 디버그 페이지
            </a>
            <a href="/user-management-web/simple-test" class="btn btn-success ms-3">
                <i class="fas fa-check-circle"></i> 간단한 테스트
            </a>
            <button class="btn btn-info ms-3" onclick="testClick()">
                <i class="fas fa-mouse-pointer"></i> 클릭 테스트
            </button>
        </div>
        
        <!-- 통계 카드 -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="stats-card">
                    <div class="stats-number">150</div>
                    <div class="stats-label">전체 사용자</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <div class="stats-number">5</div>
                    <div class="stats-label">활성 정책</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <div class="stats-number">1,234</div>
                    <div class="stats-label">오늘 활동</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <div class="stats-number">3</div>
                    <div class="stats-label">시스템 역할</div>
                </div>
            </div>
        </div>
        
        <!-- 관리 카드들 -->
        <div class="row">
            <div class="col-md-6 col-lg-3">
                <a href="/user-management-web/register" class="management-card" 
                   onclick="console.log('사용자 등록 클릭'); return true;" 
                   onmousedown="console.log('사용자 등록 마우스다운')"
                   onmouseup="console.log('사용자 등록 마우스업')">
                    <div class="card-icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="card-title">사용자 등록</div>
                    <div class="card-description">
                        새로운 사용자를 등록하고 기본 정보를 설정합니다.
                        이메일, 비밀번호, 개인정보를 관리할 수 있습니다.
                    </div>
                </a>
            </div>
            
            <div class="col-md-6 col-lg-3">
                <a href="/user-management-web/roles" class="management-card" 
                   onclick="console.log('권한 관리 클릭'); return true;"
                   onmousedown="console.log('권한 관리 마우스다운')"
                   onmouseup="console.log('권한 관리 마우스업')">
                    <div class="card-icon">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <div class="card-title">권한 관리</div>
                    <div class="card-description">
                        사용자 권한과 역할을 관리합니다.
                        역할 생성, 수정, 삭제 및 사용자별 권한 할당을 처리합니다.
                    </div>
                </a>
            </div>
            
            <div class="col-md-6 col-lg-3">
                <a href="/user-management-web/security" class="management-card" 
                   onclick="console.log('보안 관리 클릭'); return true;"
                   onmousedown="console.log('보안 관리 마우스다운')"
                   onmouseup="console.log('보안 관리 마우스업')">
                    <div class="card-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="card-title">보안 관리</div>
                    <div class="card-description">
                        시스템 보안 정책을 관리합니다.
                        비밀번호 정책, 세션 관리, IP 화이트리스트를 설정합니다.
                    </div>
                </a>
            </div>
            
            <div class="col-md-6 col-lg-3">
                <a href="/user-management-web/activity-logs" class="management-card" 
                   onclick="console.log('활동 로그 클릭'); return true;"
                   onmousedown="console.log('활동 로그 마우스다운')"
                   onmouseup="console.log('활동 로그 마우스업')">
                    <div class="card-icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <div class="card-title">활동 로그</div>
                    <div class="card-description">
                        사용자 활동 로그를 조회하고 분석합니다.
                        로그인 기록, 시스템 사용 내역을 추적합니다.
                    </div>
                </a>
            </div>
        </div>
        
        <!-- 추가 관리 카드들 -->
        <div class="row mt-4">
            <div class="col-md-6 col-lg-4">
                <a href="/user-management-web/security/policies" class="management-card" 
                   onclick="console.log('보안 정책 관리 클릭'); return true;"
                   onmousedown="console.log('보안 정책 관리 마우스다운')"
                   onmouseup="console.log('보안 정책 관리 마우스업')">
                    <div class="card-icon">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <div class="card-title">보안 정책 관리</div>
                    <div class="card-description">
                        세부적인 보안 정책을 설정하고 관리합니다.
                        정책 활성화/비활성화 및 세부 설정을 처리합니다.
                    </div>
                </a>
            </div>
            
            <div class="col-md-6 col-lg-4">
                <a href="/user-management-web/security/password-policies" class="management-card" 
                   onclick="console.log('비밀번호 정책 클릭'); return true;"
                   onmousedown="console.log('비밀번호 정책 마우스다운')"
                   onmouseup="console.log('비밀번호 정책 마우스업')">
                    <div class="card-icon">
                        <i class="fas fa-key"></i>
                    </div>
                    <div class="card-title">비밀번호 정책</div>
                    <div class="card-description">
                        비밀번호 복잡도 및 보안 요구사항을 설정합니다.
                        최소 길이, 문자 조합, 만료 정책을 관리합니다.
                    </div>
                </a>
            </div>
            
            <div class="col-md-6 col-lg-4">
                <a href="/user-management-web/security/session-policies" class="management-card" 
                   onclick="console.log('세션 정책 클릭'); return true;"
                   onmousedown="console.log('세션 정책 마우스다운')"
                   onmouseup="console.log('세션 정책 마우스업')">
                    <div class="card-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="card-title">세션 정책</div>
                    <div class="card-description">
                        사용자 세션 관리 정책을 설정합니다.
                        세션 타임아웃, 동시 로그인 제한을 관리합니다.
                    </div>
                </a>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 즉시 실행되는 디버깅 코드
        console.log('=== 사용자 관리 페이지 스크립트 시작 ===');
        
        // DOM 로드 전에도 실행되는 코드
        function immediateTest() {
            console.log('즉시 실행 테스트');
            return true;
        }
        
        immediateTest();
        
        // 클릭 이벤트 강화
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== DOM 로드됨 ===');
            
            // 모든 링크 찾기
            const allLinks = document.querySelectorAll('a');
            console.log('전체 링크 개수:', allLinks.length);
            
            // management-card 클래스를 가진 링크 찾기
            const managementCards = document.querySelectorAll('a.management-card');
            console.log('관리 카드 링크 개수:', managementCards.length);
            
            // 각 관리 카드에 이벤트 추가
            managementCards.forEach((card, index) => {
                console.log(`카드 ${index + 1} 설정:`, card.href);
                
                // 클릭 이벤트 (여러 방식으로 추가)
                card.onclick = function(e) {
                    console.log('onclick 이벤트 발생:', this.href);
                    return true; // 기본 동작 허용
                };
                
                card.addEventListener('click', function(e) {
                    console.log('addEventListener 클릭:', this.href);
                    // 기본 동작 허용
                });
                
                // 마우스 이벤트도 추가
                card.addEventListener('mousedown', function(e) {
                    console.log('마우스 다운:', this.href);
                });
                
                card.addEventListener('mouseup', function(e) {
                    console.log('마우스 업:', this.href);
                });
                
                // 시각적 피드백
                card.style.cursor = 'pointer';
                card.style.position = 'relative';
                card.style.zIndex = '100';
                
                // 접근성 속성 추가
                card.setAttribute('tabindex', '0');
                card.setAttribute('role', 'button');
                
                // 클릭 가능함을 명시적으로 표시
                card.style.pointerEvents = 'auto';
            });
            
            // 전체 페이지 클릭 이벤트 (디버깅용)
            document.addEventListener('click', function(e) {
                console.log('페이지 클릭:', e.target.tagName, e.target.className, e.target.href);
                
                // 클릭된 요소가 링크인지 확인
                if (e.target.tagName === 'A') {
                    console.log('링크 클릭됨:', e.target.href);
                }
                
                // 클릭된 요소가 management-card 내부인지 확인
                const card = e.target.closest('.management-card');
                if (card) {
                    console.log('관리 카드 클릭됨:', card.href);
                }
            });
            
            // 모든 링크에 강제 클릭 이벤트 추가
            allLinks.forEach((link, index) => {
                link.addEventListener('click', function(e) {
                    console.log(`링크 ${index + 1} 클릭:`, this.href);
                });
            });
        });
        
        // 테스트 함수들
        function testClick() {
            alert('클릭 테스트 버튼이 작동합니다!');
            console.log('테스트 클릭 성공');
        }
        
        function forceClick(href) {
            console.log('강제 클릭:', href);
            window.location.href = href;
        }
        
        // 페이지 로드 완료 확인
        window.addEventListener('load', function() {
            console.log('=== 페이지 완전히 로드됨 ===');
            
            // 최종 확인
            const finalCards = document.querySelectorAll('.management-card');
            console.log('최종 관리 카드 개수:', finalCards.length);
            
            finalCards.forEach((card, index) => {
                console.log(`최종 카드 ${index + 1}:`, card.href, card.style.pointerEvents);
            });
        });
        
        // 전역 클릭 이벤트 (최후의 수단)
        window.addEventListener('click', function(e) {
            console.log('윈도우 클릭:', e.target.tagName, e.target.className);
        });
    </script>
</body>
</html> 